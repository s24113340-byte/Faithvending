<!DOCTYPE html>
<!--
Copyright (c) 2025 Faith's Snack Vendie
All Rights Reserved

This work is protected by copyright laws and international treaties.
Unauthorized reproduction or distribution of this work, or any portion
of it, may result in severe civil and criminal penalties.
-->
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Faith's Snack Vendie</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --footer-height: 110px;
  --theme-primary: #f5c542;
  --theme-secondary: #d4af37;
}

/* Layout + centering: ensure the machine sits centered within the viewport
   but above the fixed footer so nothing overlaps. */
body {
  background: linear-gradient(to right, #000, #111, #000);
  font-family: 'Poppins', sans-serif;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  /* restrict available centering area to viewport minus footer height */
  min-height: calc(100vh - var(--footer-height));
  position: relative;
  color: #f5c542;
  /* keep space at bottom to avoid overlap with fixed footer */
  padding-bottom: var(--footer-height);
  box-sizing: border-box;
  animation: themeChange 30s infinite;
}

/* center the machine wrapper and avoid overlap */
.machine-wrapper {
  width: 100%;
  max-width: 900px;
  position: relative;
  margin: 0 auto;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

/* container should allow overflow for 3D carousel visuals but not clip controls */
.machine-container {
  background: rgba(0,0,0,0.95);
  border: 2px solid #f5c542;
  border-radius: 20px;
  padding: 30px;
  text-align: center;
  box-shadow: 0 0 40px rgba(245,197,66,0.3);
  overflow: visible;
  z-index: 1;
  width: 100%;
  box-sizing: border-box;
}

/* ensure carousel has enough vertical space and items stay centered */
.carousel-container {
  position: relative;
  width: 100%;
  height: 380px; /* increased to give larger products room */
  perspective: 1400px;
  margin-bottom: 8px;
}

/* product row and product sizing adjusted to avoid overlap with controls */
.product-row {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.5s ease;
}

/* larger, tighter products centered in the carousel */
.product {
  position: absolute;
  top: 50%;
  left: 50%;
  transform-origin: center center -160px;
  width: 200px; /* bigger product */
  padding: 18px 12px;
  border-radius: 12px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(245,197,66,0.3);
  text-align: center;
  cursor: pointer;
  transition: transform 0.45s cubic-bezier(.2,.9,.2,1), filter 0.45s ease, z-index 0s;
  font-size: 40px; /* larger emoji / icon */
  box-sizing: border-box;
}
.product p { margin: 6px 0 0; font-weight:600; color:#f5c542; font-size:16px; }
.product span { font-size:14px;color:#d4af37; }
.product.selected { box-shadow:0 0 36px #f5c542; transform: scale(1.18); z-index:999; }

/* reduce gap between products visually while avoiding overlap by using bigger translateZ in JS */
.product-row::after { content:''; display:block; width:100%; height:1px; }

.machine-container { padding: 30px 28px; } /* slightly more padding to avoid overlap with big products */
.carousel-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: #f5c542;
  border: none;
  border-radius: 50%;
  padding: 10px;
  font-size: 24px;
  cursor: pointer;
  z-index: 10;
}
#prevBtn { left: -20px; }
#nextBtn { right: -20px; }
.controls {
  margin-top:12px;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:10px;
  z-index: 2;
}
.controls input {
  padding:10px;
  width:160px;
  border-radius:8px;
  border:1px solid #f5c542;
  background:rgba(255,255,255,0.05);
  color:#f5c542;
  text-align:center;
}
button { 
  background:#f5c542; 
  border:none; 
  border-radius:10px; 
  padding:12px 25px; 
  font-weight:600; 
  cursor:pointer; 
}
button:hover { background:#d4af37; }
.money-buttons { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; margin-top:15px; }
.money-btn { background:#f5c542; padding:10px 20px; border-radius:10px; cursor:pointer; font-weight:bold; }
.money-btn:hover { transform:scale(1.1); background:#ffe58f; }
.result { margin-top:20px; padding:20px; border-left:4px solid #f5c542; background:rgba(255,255,255,0.05); text-align:left; min-height:70px; color:#ffe89c; border-radius:12px; }
.dispensed-container { margin-top:16px; display:flex; flex-wrap:wrap; justify-content:center; gap:12px; min-height:50px; margin-bottom:8px; }
.falling-product { position:absolute; width:140px; text-align:center; font-weight:600; color:#f5c542; background:rgba(245,197,66,0.1); border:1px solid #f5c542; border-radius:12px; padding:10px; animation:fallToDispense 0.8s ease forwards; z-index:1000; }
@keyframes fallToDispense { 0% { transform:translateY(0); opacity:1;} 100% { transform:translateY(var(--fall-distance)); opacity:1;} }

/* Update the footer styles in the <style> section */
.footer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: var(--footer-height);
    padding: 14px 20px;
    text-align: center;
    color: #f5c542;
    background: linear-gradient(90deg, rgba(0,0,0,0.95), rgba(17,17,17,0.95));
    border-top: 1px solid rgba(245,197,66,0.15);
    box-shadow: 0 -4px 20px rgba(0,0,0,0.5);
    z-index: 2000;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* Add these styles inside the existing <style> tag */
.copyright-section {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 5px 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.copyright-main {
    font-size: 16px;
    font-weight: 600;
    color: #f5c542;
}

.copyright-details {
    font-size: 12px;
    color: #ffe89c;
    line-height: 1.4;
}

.copyright-contact {
    font-size: 13px;
    color: #f5c542;
    margin-top: 5px;
}

/* Update body style to ensure proper spacing */
body {
    margin: 0;
    padding-bottom: 160px; /* increased to prevent overlap with footer */
    min-height: 100vh;
    position: relative;
    box-sizing: border-box;
}

/* Add these styles for the dispenser slot */
.dispenser-slot {
    position: relative;
    width: 200px;
    height: 80px;
    margin: 20px auto 0;
    background: linear-gradient(0deg, rgba(0,0,0,0.9), rgba(20,20,20,0.9));
    border-radius: 10px;
    border: 2px solid rgba(245,197,66,0.3);
    overflow: hidden;
    perspective: 1000px;
}

.slot-door {
    position: absolute;
    width: 50%;
    height: 100%;
    background: linear-gradient(90deg, #222, #333);
    border: 1px solid rgba(245,197,66,0.2);
    transition: transform 0.5s ease;
    transform-origin: center;
    z-index: 2;
}

.left-door {
    left: 0;
    transform-origin: left;
}

.right-door {
    right: 0;
    transform-origin: right;
}

.slot-inner {
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(0deg, #000, #111);
    z-index: 1;
}

.slot-shadow {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 40px;
    background: linear-gradient(0deg, rgba(0,0,0,0.8), transparent);
}

/* Update falling product animation */
.falling-product {
    animation: fallToDispense 1s ease forwards;
}

@keyframes fallToDispense {
    0% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
    70% {
        transform: translateY(var(--fall-distance)) scale(1);
        opacity: 1;
    }
    80% {
        transform: translateY(var(--fall-distance)) scale(0.8);
        opacity: 0.8;
    }
    100% {
        transform: translateY(var(--fall-distance)) scale(0.7);
        opacity: 0;
    }
}

/* Add hover effect to the slot */
.dispenser-slot:hover {
    box-shadow: 0 0 20px rgba(245,197,66,0.2);
}

/* Add these styles for the dispensed items */
.dispensed-item {
    position: relative;
    background: rgba(245,197,66,0.1);
    border: 1px solid #f5c542;
    border-radius: 12px;
    padding: 15px;
    text-align: center;
    min-width: 100px;
    animation: appear 0.3s ease-out;
}

.item-count {
    position: absolute;
    top: -10px;
    right: -10px;
    background: #f5c542;
    color: #000;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

@keyframes appear {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.brand-title {
  font-family: 'Cinzel', 'Poppins', serif;
  font-size: 34px;
  margin-bottom: 20px;
  letter-spacing: 2px;
  font-weight: 700;
  text-transform: uppercase;
  background: linear-gradient(90deg, #f9d976 0%, #f39c12 40%, #f5c542 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 6px 20px rgba(245,197,66,0.12), 0 0 8px rgba(245,197,66,0.06);
  display: inline-block;
  padding: 8px 18px;
  border-radius: 10px;
  box-shadow: 0 6px 30px rgba(245,197,66,0.06), inset 0 -2px 6px rgba(0,0,0,0.4);
  transition: transform 220ms ease, text-shadow 220ms ease;
  cursor: default;
}
.brand-title:hover {
  transform: translateY(-3px) scale(1.02);
  text-shadow: 0 10px 30px rgba(245,197,66,0.28);
}

/* Add these styles in the existing <style> section */
@keyframes themeChange {
  0% {
    background: linear-gradient(to right, #000, #111, #000); /* Current black-gold */
  }
  33% {
    background: linear-gradient(to right, #000, #2a0845, #000); /* Purple-black */
  }
  66% {
    background: linear-gradient(to right, #000, #16222A, #000); /* Blue-black */
  }
  100% {
    background: linear-gradient(to right, #000, #111, #000); /* Back to black-gold */
  }
}

body {
  /* Update existing body style */
  animation: themeChange 30s infinite;
  /* Keep other existing body properties */
}

/* Add subtle transitions for other golden elements */
.product, .footer, .brand-title, .controls input, button {
  transition: all 0.5s ease;
}
</style>
</head>
<body>
<div class="machine-wrapper">
  <div class="machine-container">
    <h1 class="brand-title">👑 Golden Choice Vendy ✨</h1>
    <div class="carousel-container">
      <button class="carousel-btn" id="prevBtn">◀</button>
      <div class="product-row" id="productRow">
        <div class="product" data-price="45" data-name="Bubbly Cola Pop" data-emoji="🥤">🥤<p>Bubbly Cola Pop</p><span>NT$45</span></div>
        <div class="product" data-price="50" data-name="Peppy Pepsi Puff" data-emoji="🥤">🥤<p>Peppy Pepsi Puff</p><span>NT$50</span></div>
        <div class="product" data-price="60" data-name="Milky Cloud Tea" data-emoji="🧋">🧋<p>Milky Cloud Tea</p><span>NT$60</span></div>
        <div class="product" data-price="40" data-name="Choco Bliss Bar" data-emoji="🍫">🍫<p>Choco Bliss Bar</p><span>NT$40</span></div>
        <div class="product" data-price="80" data-name="Sunny Burger Bun" data-emoji="🍔">🍔<p>Sunny Burger Bun</p><span>NT$80</span></div>
        <div class="product" data-price="70" data-name="Crispy Golden Fries" data-emoji="🍟">🍟<p>Crispy Golden Fries</p><span>NT$70</span></div>
        <div class="product" data-price="55" data-name="Strawberry Swirl Cupcake" data-emoji="🧁">🧁<p>Strawberry Swirl Cupcake</p><span>NT$55</span></div>
        <div class="product" data-price="65" data-name="Matcha Mochi Bites" data-emoji="🍡">🍡<p>Matcha Mochi Bites</p><span>NT$65</span></div>
        <div class="product" data-price="35" data-name="Honey Butter Corn" data-emoji="🌽">🌽<p>Honey Butter Corn</p><span>NT$35</span></div>
        <div class="product" data-price="48" data-name="Salted Caramel Pretzel" data-emoji="🥨">🥨<p>Salted Caramel Pretzel</p><span>NT$48</span></div>
        <div class="product" data-price="58" data-name="Tropical Mango Juice" data-emoji="🥭">🥭<p>Tropical Mango Juice</p><span>NT$58</span></div>
        <div class="product" data-price="30" data-name="Mini Donut Holes" data-emoji="🍩">🍩<p>Mini Donut Holes</p><span>NT$30</span></div>
      </div>
      <button class="carousel-btn" id="nextBtn">▶</button>
    </div>

    <div class="controls">
      <input type="number" id="money" placeholder="Insert Money" min="0">
      <input type="hidden" id="price">
      <button id="calculateBtn">Purchase</button>
      <button id="resetBtn">Reset</button>
    </div>
    <div class="money-buttons">
      <button class="money-btn" data-value="1">NT$1</button>
      <button class="money-btn" data-value="5">NT$5</button>
      <button class="money-btn" data-value="10">NT$10</button>
      <button class="money-btn" data-value="50">NT$50</button>
      <button class="money-btn" data-value="100">NT$100</button>
      <button class="money-btn" data-value="500">NT$500</button>
      <button class="money-btn" data-value="1000">NT$1000</button>
    </div>
    <div class="result" id="output"></div>

    <div class="dispenser-slot">
      <div class="slot-door left-door"></div>
      <div class="slot-door right-door"></div>
      <div class="slot-inner">
        <div class="slot-shadow"></div>
      </div>
    </div>
  </div>
  <div class="dispensed-container" id="dispensedContainer"></div>
</div>

<!-- Update the footer section -->
<footer class="footer">
    <div class="copyright-section">
        <div class="copyright-main">
            © <span id="year"></span> 費安菲 Faith's Snack Vendie
        </div>
        <div class="copyright-details">
            All rights reserved. This vending machine software and its content are protected 
            by copyright laws and international treaties. Unauthorized reproduction or 
            distribution is strictly prohibited.
        </div>
        <div class="copyright-contact">
            Powered by 費安菲 Faith's Snack Vendie™ | Made with 💝
        </div>
    </div>
</footer>

</body>
</html>
<script>
const products = document.querySelectorAll('.product');
const productRow = document.getElementById('productRow');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
let rotation = 0;
let autoRotate = true;

// Horizontal 3D sphere carousel
function updateCarousel() {
  const N = products.length;
  const angle = 360 / N;
  const zDepth = 220; // larger depth so bigger items don't overlap awkwardly
  products.forEach((p, i) => {
    const offset = i * angle + rotation;
    const rad = offset * Math.PI / 180;
    // scale ranges between 0.2 and 1.0 (front is largest)
    const scale = 0.6 + 0.4 * Math.cos(rad);
    const zIndex = Math.round((0.6 + scale) * 100);
    // Order: rotate in 3D, push out (translateZ), then center (-50%,-50%), then scale
    p.style.transform = `rotateY(${offset}deg) translateZ(${zDepth}px) translateX(-50%) translateY(-50%) scale(${scale})`;
    p.style.zIndex = zIndex;
    p.style.filter = `brightness(${0.6 + 0.4 * scale})`;
  });
}
updateCarousel();

// Continuous auto rotation
setInterval(()=> { if(autoRotate){ rotation += 0.4; updateCarousel(); } }, 30);

// Manual rotation buttons
prevBtn.addEventListener('click', ()=>{ autoRotate=false; rotation -= 360 / products.length; updateCarousel(); });
nextBtn.addEventListener('click', ()=>{ autoRotate=false; rotation += 360 / products.length; updateCarousel(); });

// Product selection & centering
products.forEach((item, index)=>{
  item.addEventListener('click', ()=>{
    autoRotate=false;
    products.forEach(p=>p.classList.remove('selected'));
    item.classList.add('selected');
    rotation = -index * (360 / products.length);
    updateCarousel();
    document.getElementById('price').value = item.dataset.price;
    document.getElementById('output').innerHTML = `<strong>Selected:</strong> ${item.dataset.name} (NT$${item.dataset.price})`;
  });
});

// Money buttons
document.querySelectorAll('.money-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const moneyInput=document.getElementById('money');
    moneyInput.value = Math.max(0, parseInt(moneyInput.value||0)+parseInt(btn.dataset.value));
  });
});

// Add this before the purchase event listener
let itemCounts = {};

// Update the purchase event listener section
document.getElementById('calculateBtn').addEventListener('click', ()=>{
    const moneyInserted = parseInt(document.getElementById('money').value);
    const price = parseInt(document.getElementById('price').value);
    const output = document.getElementById('output');
    const dispensedContainer = document.getElementById('dispensedContainer');

    if(isNaN(moneyInserted) || isNaN(price)){ 
        alert("⚠️ Insert money & select item."); 
        return; 
    }
    if(moneyInserted < price){ 
        alert("⚠️ Not enough money!"); 
        return; 
    }

    let change = moneyInserted-price;
    const dollars = [1000,500,100,50,10,5,1];
    let text = `<strong>Change:</strong> NT$${change}<br><br>`;
    dollars.forEach(d=>{ 
        const count = Math.floor(change/d); 
        if(count>0){ 
            text += `${d} × ${count}<br>`; 
            change -= count*d; 
        }
    });
    text += "<br>💎 Thank you for using Golden Choice Vendy!";
    output.innerHTML = text;

    const selectedItem = document.querySelector('.product.selected');
    if(selectedItem){
        const name = selectedItem.dataset.name;
        const emoji = selectedItem.dataset.emoji;
        
        // Initialize count if first time
        itemCounts[name] = itemCounts[name] || 0;
        itemCounts[name]++;
        
        // Animate slot doors
        const leftDoor = document.querySelector('.left-door');
        const rightDoor = document.querySelector('.right-door');
        
        // Open doors
        leftDoor.style.transform = 'rotateY(-120deg)';
        rightDoor.style.transform = 'rotateY(120deg)';
        
        // Only create falling animation for first purchase of each item
        if(itemCounts[name] === 1) {
            const falling = document.createElement('div');
            falling.classList.add('falling-product');
            falling.innerHTML = `${emoji}<p>${name}</p>`;
            
            const rect = selectedItem.getBoundingClientRect();
            const wrapperRect = document.querySelector('.machine-wrapper').getBoundingClientRect();
            falling.style.left = rect.left - wrapperRect.left + 'px';
            falling.style.top = rect.top - wrapperRect.top + 'px';
            document.querySelector('.machine-wrapper').appendChild(falling);
            
            const slotRect = document.querySelector('.dispenser-slot').getBoundingClientRect();
            falling.style.setProperty('--fall-distance', (slotRect.top - rect.top + 20) + 'px');
            
            falling.addEventListener('animationend', () => {
                setTimeout(() => {
                    leftDoor.style.transform = 'rotateY(0deg)';
                    rightDoor.style.transform = 'rotateY(0deg)';
                }, 500);
                
                updateDispensedItem(name, emoji);
                falling.remove();
            });
        } else {
            // Just update the counter for existing item
            setTimeout(() => {
                leftDoor.style.transform = 'rotateY(0deg)';
                rightDoor.style.transform = 'rotateY(0deg)';
            }, 500);
            updateDispensedItem(name, emoji);
        }
    }

    // Clear money input after purchase
    document.getElementById('money').value = '';
});

// Add this function to update dispensed items
function updateDispensedItem(name, emoji) {
    const dispensedContainer = document.getElementById('dispensedContainer');
    let dispensedItem = dispensedContainer.querySelector(`[data-name="${name}"]`);
    
    if (dispensedItem) {
        // Update existing item counter
        dispensedItem.querySelector('.item-count').textContent = itemCounts[name];
    } else {
        // Create new dispensed item with counter
        dispensedItem = document.createElement('div');
        dispensedItem.classList.add('dispensed-item');
        dispensedItem.dataset.name = name;
        dispensedItem.innerHTML = `
            <span class="item-count">${itemCounts[name]}</span>
            ${emoji}<p>${name}</p>
        `;
        dispensedContainer.appendChild(dispensedItem);
    }
}

// Reset
document.getElementById('resetBtn').addEventListener('click', ()=>{
    document.getElementById('money').value = '';
    document.getElementById('price').value = '';
    products.forEach(p => p.classList.remove('selected'));
    document.getElementById('output').innerHTML = '';
    document.getElementById('dispensedContainer').innerHTML = ''; // Clear all dispensed items
    itemCounts = {};
    autoRotate = true;
});

// Set current year in footer
document.getElementById('year').textContent = new Date().getFullYear();

// Add this to your existing script
// Theme color adjustment function
function updateThemeColors() {
    const time = (Date.now() / 1000) % 30; // 30-second cycle
    let primaryColor, secondaryColor;
    
    if (time < 10) { // Golden theme
        primaryColor = '#f5c542';
        secondaryColor = '#d4af37';
    } else if (time < 20) { // Purple theme
        primaryColor = '#9b4dca';
        secondaryColor = '#7e3aa3';
    } else { // Blue theme
        primaryColor = '#4a90e2';
        secondaryColor = '#357abd';
    }

    document.documentElement.style.setProperty('--theme-primary', primaryColor);
    document.documentElement.style.setProperty('--theme-secondary', secondaryColor);
}

// Update colors every second
setInterval(updateThemeColors, 1000);
</script>
